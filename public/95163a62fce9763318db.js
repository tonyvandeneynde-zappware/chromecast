!function(){var t={},e=e||{},n=function(t){var n="Cannot seek during ads playout.",r="Cannot switch track",a="Media session does not exist.",i="No receivers available",o="Reset ABR functionality not available on cast.",s="SDK not yet ready",u="Sender is destroyed.",c="clpp.cast.CastProxy",h="clpp.cast.Player",p="clpp.cast.Receiver",f="urn:x-cast:castlabs",d="urn:x-cast:com.google.cast.media",l=function(t,n){this.log=new e.F(n),this.a=t,this.j=null,this.g=e.Co,this.m=e.Do,this.h=2,this.B=Date.now(),this.A=-1},g=function(t){return JSON.stringify(t,(function(t,n){if("license"!==t&&typeof n!==e.Tc){if(n instanceof Event){var r,a={};for(r in n){var i=n[r];typeof i===e.vd?"detail"===r&&(a[r]=i):r in Event||(a[r]=i)}return a}return typeof n===e.ud?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n}}))},m=function(t){if(typeof t!==e.ge)return t;try{return JSON.parse(t,(function(t,e){return"NaN"===e?NaN:"-Infinity"===e?-1/0:"Infinity"===e?1/0:e}))}catch(e){return t}},y=function(t,n,r){var a,i,o,s,u,c,h,p;return e.z((function(f){if(1==f.a){if(n.includes(t.mimeType))return f.return(t);for(o=i=a=null,s=0;s<n.length&&!i;)o=n[s++],i=e.zg(t.mimeType,o);return i&&o?(u=e.Fh(t.url),e.v(f,r.fetch(u).N,3)):f.G(2)}return 2!=f.a&&(c=f.f)&&c.data&&(h=i.a(e.J(c.data)),p=URL.createObjectURL(new Blob([h])),a={url:p,kind:t.kind,language:t.language,label:t.label,mimeType:o}),f.return(a)}))},v=function(n,r){if(t.chrome&&chrome.cast&&chrome.cast.media)var a=chrome.cast.media.HlsSegmentFormat,i=chrome.cast.media.HlsVideoSegmentFormat;else{if(!(t.cast&&cast.framework&&cast.framework.messages))return;a=cast.framework.messages.HlsSegmentFormat,i=cast.framework.messages.HlsVideoSegmentFormat}switch(n){case e.Ge:return i.FMP4;case e.Fe:return r===e.sh?i.MPEG2_TS:a.TS;case e.Yb:return a.AAC;case e.Zb:return a.AC3;case e.$b:return a.E_AC3;case"audio/mpeg":return a.MP3;case e.ac:return a.FMP4}},T=function(t){l.call(this,t,"clpp.cast.SenderStateManager"),this.o=this.f=null,this.w=this.C.bind(this)},k=function(){this.h=new e.F("clpp.cast.SenderTrackManager"),this.a=null,this.g=[],this.f={}},E=function(t,e){var n=function(t){return(t=t.a?t.a.a:null)?t.activeTrackIds.map((function(t){return t.toString()})):[]}(t);return w(t,e).find((function(t){return n.includes(t.id)}))||null},w=function(t,e){return t.g.filter((function(t){return t.type===e}))},C=function(t,n,a){var i=t.a.a;if(i)if(a){if(t.f[n]=a.renditions[0],a=[+a.id],n!==e.O){var o=t.ha();o&&a.push(+o.id)}a=new chrome.cast.media.EditTracksInfoRequest(a),i.editTracksInfo(a,(function(){t.f[n]=null,b(t,n)}),(function(e){t.f[n]=null,t.h.debug(r,e)}))}else n===e.O&&(a=new chrome.cast.media.EditTracksInfoRequest([]),i.editTracksInfo(a,(function(){b(t,n)}),(function(e){t.h.debug(r,e)})))},b=function(t,n){n===e.Q?t.a.trigger(new e.M(e.Nh)):n===e.O&&t.a.trigger(new e.M(e.Oh))},S=function(n,r,a,i){e.Vh.call(this),this.m=new e.F(e.tc),this.aa=n,this.w=new e.Ah(r),this.Y=a,this.ia=i,this.j=this.K=e.Dj(),this.D=[],this.C=0,this.M=new e.xj,this.I=this.o=this.a=null,this.B=this.A=!1,this.Da="",this.Ka=1e6,this.g=new k,this.g.Cb(this),this.h=new T(this),this.J=new e.bh,this.f=null,this.H=new Set,this.S=this.Li.bind(this),this.Ea=this.hj.bind(this),this.ca=this.Wi.bind(this),this.V=this.Pi.bind(this),this.P=null,t.hasOwnProperty("cast")||Object.defineProperty(t,"cast",{get:function(){return t.cast_},set:function(e){t.cast_=e,t.setTimeout((function(){N(!0)}),0)}}),I(this),pt.add(this)},A=function(t){var n,r;return e.z((function(a){if(1==a.a)return pt.delete(t),t.A&&(t.A=!1,(n=cast.framework.CastContext.getInstance()).removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,t.S),n.removeEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t.Ea)),r=[],t.g&&(r.push(t.g.destroy()),t.g=null),t.h&&(r.push(t.h.destroy()),t.h=null),e.v(a,Promise.all(r),2);t.B=!1,t.w&&(t.w.stop(),t.w=null),t.Y=null,t.ia=null,e.w(a)}))},I=function(e){if(!e.A&&t.chrome&&chrome.cast&&chrome.cast.isAvailable&&t.cast&&cast.framework&&cast.framework.CastContext&&e.aa.length){e.A=!0,e.w.He();var n=cast.framework.CastContext.getInstance(),r=new cast.framework.CastOptions;r.receiverApplicationId=e.aa,r.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n.setOptions(r),n.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e.S),n.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,e.Ea),ht&&e.w.X(.02)}},M=function(t,e){R(t,e.getMediaSession()),e.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,t.ca),e.addMessageListener(f,t.V)},R=function(t,n){n!==t.a&&(t.a=n,t.a&&(t.J.release(),t.I=null,t.o=null,t.o=new cast.framework.RemotePlayer,t.I=new cast.framework.RemotePlayerController(t.o),t.J.on(t.I,cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,t.Eg.bind(t)),t.g&&t.g.load(),t.h&&t.h.init(),t.trigger(new e.M(e.ed))))},D=function(t){return e.z((function(n){return t.$a()?n.G(0):e.v(n,cast.framework.CastContext.getInstance().requestSession(),0)}))},P=function(t,n){var r,a,i,o,s,u,c,h,p,f,d;return e.z((function(l){switch(l.a){case 1:return r=chrome.cast.media.StreamType,a=e.rp,e.v(l,D(t),2);case 2:if(!n)return l.return();if(i=cast.framework.CastContext.getInstance(),o=i.getCurrentSession(),(s=new chrome.cast.media.MediaInfo(n.source.url,n.source.type)).streamType=n.isLive?r.LIVE:r.BUFFERED,c=(u=n).xb,h=u.audioMimeType,s.hlsVideoSegmentFormat=v(c,a.VIDEO),s.hlsSegmentFormat=v(h,a.AUDIO),!n.Ha){l.G(3);break}if(!t.P){l.G(4);break}return e.v(l,Promise.resolve(t.P(n.Ha)),5);case 5:(p=l.f)&&(n.Ha=p);case 4:if(t.j=n.Ha,t.D=e.um(t.j),t.C=t.D.findIndex((function(t){return t.url===n.source.url})),!n.Ha.remoteTextTracks){l.G(6);break}return e.v(l,Promise.all(n.Ha.remoteTextTracks.map(t.Ph.bind(t))),7);case 7:f=l.f,s.tracks=f.filter((function(t){return t})),n.Ha.remoteTextTracks=void 0;case 6:delete n.Ha.autoplay,n.Ha.startTime=null,s.customData={playerConfiguration:g(n.Ha)};case 3:return n.source.name&&t.yd(n.source.name),t.f&&(s.metadata=t.f),d=new chrome.cast.media.LoadRequest(s),typeof n.autoplay===e.ec&&(d.autoplay=n.autoplay),typeof n.currentTime===e.ud&&(d.currentTime=n.currentTime),e.v(l,o.loadMedia(d),0)}}))},L=function(t,n,r){var a,i;return r=void 0===r?0:r,e.z((function(o){return(a=t.g.ha())&&a.language&&(t.j.preferredTextLanguage=a.language),(i=t.g.ga())&&i.language&&(t.j.preferredAudioLanguage=i.language),e.v(o,P(t,{source:t.getLoadedSource(),currentTime:r,isLive:t.isLive(),autoplay:n,Ha:t.j}),0)}))},N=function(t){if(t)for(var n=(t=e.t(pt)).next();!n.done;n=t.next())I(n.value)},x=function(t,n,r){e.Vh.call(this);var a=this;this.f=t,this.h=n,this.j=typeof r===e.Tc?r:function(t,n){a.f&&t!==e.Io&&t!==e.Co&&a.f.load(n)},this.a=B(this),this.g=new e.F(c),this.addDelegate(this.f)},B=function(t){return new S(t.h,(function(){t.trigger(new e.M(e.lc))}),(function(n,r){var a=t.f.getConfiguration();a.source=r.source,a.autoplay=!1,a.startTime=r.currentTime?Math.max(r.currentTime-1,0):null,a.ima&&a.startTime&&(a.ima.playAdsAfterTime=a.startTime),r.Re&&(a.preferredAudioLanguage=r.Re),r.bg&&(a.preferredTextLanguage=r.bg),e.so(t.f,null),t.trigger(new e.M("castingended")),t.j(n,a)}),(function(){return _(t)}))},_=function(t){return e.z((function(n){if(1==n.a)return t.trigger(new e.M(e.kc)),t.f.a!==t.a&&t.f&&t.a?e.v(n,t.f.release(),2):n.return();e.so(t.f,t.a),e.w(n)}))},V=function(t){l.call(this,t,"clpp.cast.StateManager"),this.I=this.Jg.bind(this),this.H=this.Ig.bind(this),this.w=this.Ri.bind(this),this.o=this.Ji.bind(this),this.K=this.Lg.bind(this),this.J=this.Kg.bind(this),this.M=this.kj.bind(this),this.D=this.Vi.bind(this),this.C=this.Hg.bind(this),this.f=this.Gg.bind(this)},O=function(t){this.Mb=t,this.a=this.f.bind(this)},j=function(){return[cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,cast.framework.events.EventType.TIMED_METADATA_CHANGED,cast.framework.events.EventType.TIMED_METADATA_ENTER,cast.framework.events.EventType.TIMED_METADATA_EXIT]},F=function(t){var n=t.dashTimedMetadata,r=e.xe;return n&&(r=n.schemeIdUri),{type:r.startsWith(e.we)?e.lh:e.jh,schemeIdUri:r,id:t.id||"",startTime:t.startTime,endTime:t.endTime,value:n&&n.value||"",eventElement:n&&n.eventElement}},G=function(){this.g=new e.F("clpp.cast.TrackManager"),this.l=null,this.o=1e9,this.h=[],this.j=[],this.m=this.pj.bind(this),this.a=this.f=null},H=function(){return cast.framework.CastReceiverContext.getInstance().getPlayerManager()},U=function(t){t.a=H().getTextTracksManager();var n=t.a.getTracks();t.j=K(e.O,n)},z=function(t,n,r,a){r=e.Bh(r);var i=!1,o=[];n===e.Q?o=t.getAudioTracks():n===e.O&&(o=t.da());var s=r.find((function(t){return o.some((function(e){return e.language===t}))}));e.ig(s)&&(r=o.filter((function(t){return t.language===s})),o=r.length?r:o,i=i||!!r.length),e.ig(a)&&(r=o.filter((function(t){return t.roles.includes(a)})),o=r.length?r:o,i=i||!!r.length),i&&o[0]&&(i=o[0],t.g.info("Will select track",i),n===e.Q?t.ka(i):n===e.O&&t.sa(i))},K=function(t,n){for(var r=[],a=e.t(n),i=a.next();!i.done;i=a.next()){i=i.value;var o=new e.qh(i.trackId.toString(),t);o.roles=i.roles||[],o.kind=i.subtype||null,o.language=i.language||null,o.label=i.name||null,o.src=i.trackContentId||null,o.mimeType=i.trackContentType||null,i.customData&&(o.mimeType=i.customData.mimeType||o.mimeType,o.src=i.customData.url||o.src),o.renditions.push(new e.xh(o.id,o)),r.push(o)}return r},q=function(){e.Vh.call(this),this.C=new e.F(h),this.g=this.o=e.Dj(),this.w=null,this.j=-1,this.D=new e.xj,this.f=this.m=this.h=this.a=this.A=null,this.B=!1},Y=function(){return cast.framework.CastReceiverContext.getInstance().getPlayerManager()},X=function(t,n,r,a,i){this.a=t,this.f=n,this.h=typeof r===e.ud?r:1,this.j=typeof a===e.ud?a:1,this.g=typeof i===e.ud?i:0},W=function(t){this.a=t},J=function(t){this.l=t,this.a=null,this.g=this.Mg.bind(this),this.f=[cast.framework.events.EventType.PLAYER_LOADING,cast.framework.events.EventType.BREAK_CLIP_LOADING,cast.framework.events.EventType.BREAK_STARTED,cast.framework.events.EventType.BREAK_ENDED,cast.framework.events.EventType.BREAK_CLIP_STARTED,cast.framework.events.EventType.BREAK_CLIP_ENDED,cast.framework.events.EventType.PLAYING,cast.framework.events.EventType.PAUSE,cast.framework.events.EventType.BUFFERING],Q().addEventListener(this.f,this.g)},$=function(t){var e=new cast.framework.messages.VastAdsRequest;return e.adsResponse=t,e},Q=function(){return cast.framework.CastReceiverContext.getInstance().getPlayerManager()},Z=function(t,n,r){if(r instanceof cast.framework.events.BreaksEvent||-1!==t.getPosition()){var a=null;(r=et(t,r))&&(a={ad:r}),t.l.trigger(new e.M(n,a))}},tt=function(t,n){var r=new e.K(1,10,10003,{errorType:n});t.l.onError(r)},et=function(t,n){var r=null;if(t.a&&n instanceof cast.framework.events.BreaksEvent){var a,i=null,o=null;typeof n.breakClipId===e.ge&&(i=t.a.getBreakClipById(n.breakClipId)),typeof n.breakId===e.ge&&(!(o=t.a.getBreakById(n.breakId))&&i&&(o=t.a.getBreaks().find((function(t){return t.breakClipIds.includes(i.id)}))||null),o&&(a=t.a.getBreaks().filter((function(t){return 0<=t.position})).sort((function(t,e){return t.position-e.position})).findIndex((function(t){return t===o})))),r=new X(i,o,n.index,n.total,a)}return r},nt=function(){this.a=!1,this.h=new e.F(p),this.f=this.l=null,this.g=new Set,this.A=this.Ui.bind(this),this.w=this.Fg.bind(this),this.j=null,this.o=new e.bh,this.m=null},rt=function(){return dt||(dt=new nt)},at=function(t,e){e+="=";var n=t.indexOf(e);if(0<=n){var r=t.substring(n+e.length);r.startsWith('"')?r=(r=r.substring(1)).substring(0,r.indexOf('"')):0<=(n=r.indexOf(","))&&(r=r.substring(0,n))}return r},it=function(t){this.f=t,this.a=null,this.g=new e.bh,this.h=[cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,cast.framework.RemotePlayerEventType.CURRENT_BREAK_CLIP_NUMBER_CHANGED,cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED]},ot=function(t,n){var r=null,a=st(t);a&&(r={ad:a}),t.f.trigger(new e.M(n,r))},st=function(t){var e=null;if(t.a&&t.a.mediaInfo){e=t.a.mediaInfo;var n=null,r=null,a=t.a.currentBreakClipNumber;if(e.breaks&&(n=e.breaks.find((function(e){return e.id===t.a.breakId}))||null))var i=n.breakClipIds.length,o=0>=n.position?n.position:e.breaks.filter((function(t){return 0<=t.position})).sort((function(t,e){return t.position-e.position})).findIndex((function(t){return t===n}));e.breakClips&&(r=e.breakClips.find((function(e){return e.id===t.a.breakClipId}))||null),e=new X(r,n,a,i,o)}return e},ut=function(){},ct=function(){};e.h=l.prototype,e.h.release=function(){this.fa(e.Co)},e.h.destroy=function(){return this.j=this.a=null,Promise.resolve()},e.h.getState=function(){return this.g},e.h.onError=function(t){t.a===e.L&&this.fa(e.hm)},e.h.fa=function(t){if(t!==this.g)if(this.g===e.hm&&t!==e.Co)this.log.debug("Player is in ERROR state and can not switch to",t);else{var n=Date.now();this.m=this.g,this.g=t,this.g===e.jn?(this.A=n,this.a.trigger(new e.M(e.hc,{detail:{bufferedTimeMS:-1,reason:this.h}}))):this.m===e.jn&&this.a.trigger(new e.M(e.gc,{detail:{bufferedTimeMS:n-this.A,reason:this.h}})),t={currentState:this.g,previousState:this.m,timeSinceLastStateChangeMS:n-this.B},this.B=n,this.j&&e.Sl(this.j,this.g),this.a.trigger(new e.M(e.de,{detail:t}))}},e.A("clpp.cast.CastUtils",(function(){})),e.u(T,l),T.prototype.init=function(){var t=this.a,e=t.a;e&&(this.f&&this.f.removeUpdateListener(this.w),this.f=e,this.f.addUpdateListener(this.w),this.o=t.o)},T.prototype.destroy=function(){var t=this;return e.z((function(n){return t.f&&(t.f.removeUpdateListener(t.w),t.f=null),e.v(n,l.prototype.destroy.call(t),0)}))},T.prototype.fa=function(t){var e=this.a.o;e&&e.isPlayingBreak||l.prototype.fa.call(this,t)},T.prototype.C=function(){if(this.f&&this.o&&!this.o.isPlayingBreak)switch(this.f.playerState){case chrome.cast.media.PlayerState.IDLE:switch(this.f.idleReason){case chrome.cast.media.IdleReason.FINISHED:this.fa(e.Io);break;case chrome.cast.media.IdleReason.ERROR:this.fa(e.hm);break;default:this.fa(e.Co)}break;case chrome.cast.media.PlayerState.PLAYING:this.fa(e.no);break;case chrome.cast.media.PlayerState.PAUSED:this.fa(e.No);break;case chrome.cast.media.PlayerState.BUFFERING:this.fa(e.jn)}},e.u(k,e.R),e.h=k.prototype,e.h.Cb=function(t){this.a=t},e.h.release=function(){this.g=[],this.f={}},e.h.load=function(){this.release();var t=this.a.a;t&&(t=t.media)&&(this.g=(t=t.tracks)?t.map((function(t){switch(t.type){case chrome.cast.media.TrackType.VIDEO:var n=e.sh;break;case chrome.cast.media.TrackType.AUDIO:n=e.Q;break;case chrome.cast.media.TrackType.TEXT:n=e.O}return(n=new e.qh(t.trackId.toString(),n)).kind=t.subtype,n.language=t.language,n.label=t.name,n.src=t.trackContentId,n.mimeType=t.trackContentType,t.customData&&(n.src=t.customData.url||n.src,n.mimeType=t.customData.mimeType||n.mimeType),n.renditions.push(new e.xh(n.id,n)),n})):[],this.a.trigger(new e.M(e.sp)))},e.h.destroy=function(){this.a=null},e.h.getVideoTracks=function(){return w(this,e.sh)},e.h.getAudioTracks=function(){return w(this,e.Q)},e.h.da=function(){return w(this,e.O)},e.h.ea=function(){var t=this.za();return t?t.renditions[0]:null},e.h.wa=function(){var t=this.ga();return t?t.renditions[0]:null},e.h.ya=function(){var t=this.ha();return t?t.renditions[0]:null},e.h.Na=function(){return this.f[e.sh]||null},e.h.Wa=function(){return this.f[e.Q]||null},e.h.Xa=function(){return this.f[e.O]||null},e.h.za=function(){return E(this,e.sh)},e.h.ga=function(){return E(this,e.Q)},e.h.ha=function(){return E(this,e.O)},e.h.Ta=function(t){C(this,e.sh,t)},e.h.ka=function(t){C(this,e.Q,t)},e.h.sa=function(t){C(this,e.O,t)},e.h.Sa=function(t){this.Ta(t&&t.track)},e.h.eb=function(t){this.ka(t&&t.track)},e.h.gb=function(t){this.sa(t&&t.track)},e.h.addTextTrack=function(){return e.z((function(t){e.w(t)}))},e.h.na=function(){return!0},k.prototype.isAbrEnabled=k.prototype.na,k.prototype.addTextTrack=k.prototype.addTextTrack,k.prototype.setTextRendition=k.prototype.gb,k.prototype.setAudioRendition=k.prototype.eb,k.prototype.setVideoRendition=k.prototype.Sa,k.prototype.setTextTrack=k.prototype.sa,k.prototype.setAudioTrack=k.prototype.ka,k.prototype.setVideoTrack=k.prototype.Ta,k.prototype.getTextTrack=k.prototype.ha,k.prototype.getAudioTrack=k.prototype.ga,k.prototype.getVideoTrack=k.prototype.za,k.prototype.getLoadingTextRendition=k.prototype.Xa,k.prototype.getLoadingAudioRendition=k.prototype.Wa,k.prototype.getLoadingVideoRendition=k.prototype.Na,k.prototype.getTextRendition=k.prototype.ya,k.prototype.getAudioRendition=k.prototype.wa,k.prototype.getVideoRendition=k.prototype.ea,k.prototype.getTextTracks=k.prototype.da,k.prototype.getAudioTracks=k.prototype.getAudioTracks,k.prototype.getVideoTracks=k.prototype.getVideoTracks,e.u(S,e.Vh),e.h=S.prototype,e.h.init=function(t,e){this.j=this.K=e},e.h.unload=function(){var t=this;return new Promise((function(e,n){t.g&&t.g.release(),t.a&&!t.a.idleReason||e(),t.a.stop(null,e,n)}))},e.h.release=function(){var t=this;return this.unload().then((function(){t.h&&t.h.release()}))},e.h.destroy=function(){return e.z((function(t){e.w(t)}))},e.h.Xc=function(t){this.P=t},e.h.Vb=function(){return this.A},e.h.$a=function(){return this.B},e.h.ce=function(){return this.Da},e.h.sendMessage=function(t,n){var r,a,i,o=this;return e.z((function(s){switch(s.a){case 1:if(!(a=cast.framework.CastContext.getInstance().getCurrentSession())){r=new e.K(1,8,8004,void 0),s.G(2);break}return e.mf(s,3),e.v(s,a.sendMessage(t,g(n)),5);case 5:e.nf(s,2);break;case 3:i=e.of(s),r=new e.K(1,8,8e3,{detailedErrorCode:i});case 2:r&&o.onError(r),e.w(s)}}))},e.h.cast=function(){var t,n,r=this;return e.z((function(a){if(1==a.a){if(!r.Vb())throw r.m.warn(s),new e.K(1,8,8001,void 0);if(!ht)throw r.m.warn(i),new e.K(1,8,8002,void 0);if(r.$a())throw r.m.warn("Already casting"),new e.K(1,8,8003,void 0);return e.mf(a,2),e.v(a,D(r),4)}if(2!=a.a)return e.nf(a,0);throw t=e.of(a),n={},t instanceof chrome.cast.Error?(n.detailedErrorCode=t.code,n.details=t.details,n.reason=t.description):n.detailedErrorCode=t,new e.K(1,8,8e3,n)}))},e.h.Yd=function(){this.$a()&&cast.framework.CastContext.getInstance().endCurrentSession(!0)},e.h.addMessageListener=function(t){typeof t===e.Tc&&this.H.add(t)},e.h.removeMessageListener=function(t){typeof t===e.Tc&&this.H.delete(t)},e.h.play=function(){var t=this;return this.isEnded()?L(this,!0):new Promise((function(e,n){if(!t.a)return n(a);t.a.play(null,e,n)}))},e.h.pause=function(){var t=this;return new Promise((function(e,n){if(t.isEnded()&&e(),!t.a)return n(a);t.a.pause(null,e,n)}))},e.h.isPaused=function(){return!!this.a&&this.a.playerState===chrome.cast.media.PlayerState.PAUSED},e.h.isEnded=function(){return this.getState()===e.Io},e.h.seek=function(t){var r=this;return this.isEnded()?L(this,!1,t):new Promise((function(i,o){r.a||o(a),r.o.isPlayingBreak&&o(n);var s=new chrome.cast.media.SeekRequest;s.currentTime=t,r.trigger(new e.M(e.Ae)),r.a.seek(s,(function(){r.trigger(new e.M(e.ze)),i()}),o)}))},e.h.getPosition=function(){return this.a&&this.a.getEstimatedTime()||0},e.h.getDuration=function(){return this.a&&this.a.media&&typeof this.a.media.duration===e.ud?this.a.media.duration:0},e.h.setDrmCustomDataModifier=function(){},e.h.setCdnErrorCallback=function(){},e.h.getPlaybackRate=function(){return this.a&&this.a.playbackRate||0},e.h.setPlaybackRate=function(t){this.a&&0<t&&this.sendMessage(d,{type:"SET_PLAYBACK_RATE",requestId:Math.round(1e3*Math.random()),mediaSessionId:this.a.mediaSessionId,playbackRate:t})},e.h.getVolume=function(){return this.a&&this.a.volume.level},e.h.setVolume=function(t){this.a&&0<=t&&1>=t&&(t=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(t)),this.a.setVolume(t))},e.h.isMuted=function(){return this.a&&this.a.volume.muted},e.h.setMuted=function(t){this.a&&(t=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(void 0,t)),this.a.setVolume(t))},e.h.getPresentationStartTime=function(){return this.a&&this.a.media.startAbsoluteTime||0},e.h.getSeekRange=function(){var t={start:0,end:this.getDuration()};if(this.isLive()){var n=this.a.getEstimatedLiveSeekableRange();n&&typeof n.start===e.ud&&typeof n.end===e.ud&&(t={start:n.start,end:n.end})}return t},e.h.getState=function(){return this.h?this.h.getState():e.Do},e.h.getStats=function(){return this.a&&this.a.customData&&this.a.customData.stats?m(this.a.customData.stats):e.Yl()},e.h.isLive=function(){return-1===this.getDuration()},e.h.load=function(t){var n,r,a=this;return e.z((function(o){return a.Vb()?ht?(a.D=e.um(t),e.Gj(t)&&(a.j=e.Fj(a.K,t)),n=a.D[a.C],r={source:n,isLive:n.isLive,autoplay:a.j.autoplay,Ha:a.j,xb:n.xb,audioMimeType:n.audioMimeType},e.v(o,P(a,r),0)):(a.m.warn(i),o.return()):(a.m.warn(s),o.return())}))},e.h.getBufferInfo=function(){return new e.Uh},e.h.getTrackManager=function(){return this.g},e.h.getConfiguration=function(){return this.j},e.h.getSurface=function(){return null},e.h.setNetworkEngine=function(t){this.M=t},e.h.getNetworkEngine=function(){return this.M},e.h.getSourceIndex=function(){return this.C},e.h.setSourceIndex=function(t){this.C=t},e.h.getLoadedSource=function(){return this.D[this.C]},e.h.getPeriods=function(){return[]},e.h.getDrmInfo=function(){return null},e.h.getTimelineCues=function(){return[]},e.h.resetAbr=function(){this.m.warn(o)},e.h.onError=function(t){t&&(this.trigger(new e.M(e.Rc,{detail:t})),this.h)&&this.h.onError(t)},e.h.namespace=function(){return e.tc},e.h.canPlay=function(){return this.Vb()?2:0},e.h.Ee=function(t){this.f=t},e.h.Sd=function(){this.f=null},e.h.yd=function(t){this.f||(this.f={metadataType:chrome.cast.media.MetadataType.GENERIC}),this.f.title=t},e.h.De=function(t){this.f||(this.f={metadataType:chrome.cast.media.MetadataType.GENERIC}),this.f.images=[{url:t}]},e.h.Ce=function(t){this.f||(this.f={}),this.f.metadataType=chrome.cast.media.MetadataType.MUSIC_TRACK,this.f.artist=t},e.h.Fe=function(t){this.f||(this.f={metadataType:chrome.cast.media.MetadataType.GENERIC}),this.f.releaseDate=t},e.h.Li=function(t){var e=cast.framework.CastContext.getInstance(),n=t.castState===cast.framework.CastState.CONNECTED;ht=t.castState!==cast.framework.CastState.NO_DEVICES_AVAILABLE,this.Da=n?e.getCurrentSession().getCastDevice().friendlyName:"",this.w.He()},e.h.hj=function(t){switch(this.m.debug("state: "+t.sessionState+", details:",t),t.sessionState){case cast.framework.SessionState.SESSION_STARTED:this.B=!0,M(this,t.session);break;case cast.framework.SessionState.SESSION_RESUMED:this.$a()||(this.B=!0,M(this,t.session),this.ia());break;case cast.framework.SessionState.SESSION_ENDED:if(this.$a()&&this.a){var e=this.a.media,n=this.g.ga(),r=this.g.ha();n=n&&n.language||void 0,r=r&&r.language||void 0,this.Y(this.getState(),{source:{url:e.contentId,type:e.contentType,isLive:e.streamType===chrome.cast.media.StreamType.LIVE},currentTime:this.getPosition(),bg:r,Re:n})}t.session.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.ca),t.session.removeMessageListener(f,this.V),this.B=!1,this.a=null,this.J.release(),this.o=this.I=null}},e.h.Wi=function(t){this.m.debug("New media session",t.mediaSession),R(this,t.mediaSession)},e.h.Pi=function(t,e){if(t===f&&0<this.H.size){var n=m(e);this.H.forEach((function(t){return t(n)}))}},e.h.Eg=function(t){this.trigger(new e.M(e.re,{currentTime:t.value}))},e.h.Ph=function(t){var n,r,a=this;return e.z((function(i){return 1==i.a?(n=null,e.v(i,y(t,[e.pe,e.Vb],a.M),2)):((r=i.f)&&((n=new chrome.cast.media.Track(a.Ka++,chrome.cast.media.TrackType.TEXT)).language=r.language,n.name=r.label||null,n.trackContentId=r.url,n.trackContentType=r.mimeType,n.customData={mimeType:t.mimeType,url:t.url}),i.return(n))}))},e.h.getTextDisplayer=function(){return null},S.prototype.getTextDisplayer=S.prototype.getTextDisplayer,S.prototype.getNetworkEngine=S.prototype.getNetworkEngine,S.prototype.setNetworkEngine=S.prototype.setNetworkEngine;var ht=!1,pt=new Set;t.__onGCastApiAvailable=N,e.u(x,e.Vh),e.h=x.prototype,e.h.destroy=function(){var t=this;return e.z((function(n){if(1==n.a)return t.a?e.v(n,A(t.a),3):n.G(2);2!=n.a&&(t.a=null),t.removeDelegate(t.f),e.w(n)}))},e.h.Rd=function(){return!!this.a&&this.a.Vb()&&ht},e.h.$a=function(){return!!this.a&&this.a.$a()},e.h.ce=function(){return this.a?this.a.ce():""},e.h.Xc=function(t){this.a&&this.a.Xc(t)},e.h.cast=function(t){var n,r,a,i=this;return e.z((function(o){switch(o.a){case 1:if(!i.a)return o.return();var s=null,u=i.f.getLoadedSource();if(u){var c=i.f.getTrackManager();if((s=c.getVideoTracks()[0])&&s.mimeType)var h=s.mimeType;s=i.f.getConfiguration();var p=c.ga();if(p){if(p.mimeType)var f=p.mimeType;p.language&&(s.preferredAudioLanguage=p.language),p.roles.length&&(s.preferredAudioRole=p.roles[0])}(c=c.ha())&&(c.language&&(s.preferredTextLanguage=c.language),c.roles.length&&(s.preferredTextRole=c.roles[0])),s={source:u,isLive:c=u&&typeof u.isLive===e.ec?u.isLive:i.f.isLive(),autoplay:!i.f.isPaused(),currentTime:Math.max(i.f.getPosition()-1,0),xb:h,audioMimeType:f,Ha:s}}return n=s,e.mf(o,2),e.v(o,i.a.cast(),4);case 4:return i.f&&i.a?e.v(o,_(i),5):o.return();case 5:if(!i.a)return o.return();if(n&&(n.autoplay=!i.f.isPaused()),t)return e.v(o,i.f.load(t),7);if(i.a.a){o.G(7);break}return e.v(o,P(i.a,n),7);case 7:e.nf(o,0);break;case 2:r=e.of(o),i.g.error("Error while trying to cast",r),a=new e.M(e.Rc,{detail:r}),i.trigger(a),e.w(o)}}))},e.h.Yd=function(){this.a&&this.a.Yd()},e.h.Ag=function(t){var n=this;return e.z((function(r){if(1==r.a)return t===n.h?r.return():(n.h=t,n.a?e.v(r,A(n.a),2):r.G(2));n.a=B(n),e.w(r)}))},e.h.sendMessage=function(t){var n=this;return e.z((function(r){return n.a?e.v(r,n.a.sendMessage(f,t),0):(n.g.warn(u),r.return())}))},e.h.addMessageListener=function(t){this.a?this.a.addMessageListener(t):this.g.warn(u)},e.h.removeMessageListener=function(t){this.a?this.a.removeMessageListener(t):this.g.warn(u)},e.h.Ee=function(t){this.a&&this.a.Ee(t)},e.h.Sd=function(){this.a&&this.a.Sd()},e.h.yd=function(t){this.a&&this.a.yd(t)},e.h.De=function(t){this.a&&this.a.De(t)},e.h.Ce=function(t){this.a&&this.a.Ce(t)},e.h.Fe=function(t){this.a&&this.a.Fe(t)},e.A(c,x),x.prototype.setContentReleaseDate=x.prototype.Fe,x.prototype.setContentArtist=x.prototype.Ce,x.prototype.setContentImage=x.prototype.De,x.prototype.setContentTitle=x.prototype.yd,x.prototype.clearContentMetadata=x.prototype.Sd,x.prototype.setContentMetadata=x.prototype.Ee,x.prototype.removeMessageListener=x.prototype.removeMessageListener,x.prototype.addMessageListener=x.prototype.addMessageListener,x.prototype.sendMessage=x.prototype.sendMessage,x.prototype.changeReceiverId=x.prototype.Ag,x.prototype.forceDisconnect=x.prototype.Yd,x.prototype.cast=x.prototype.cast,x.prototype.setPlayerConfigInterceptor=x.prototype.Xc,x.prototype.getReceiverName=x.prototype.ce,x.prototype.isCasting=x.prototype.$a,x.prototype.canCast=x.prototype.Rd,x.prototype.destroy=x.prototype.destroy,e.u(V,l),e.h=V.prototype,e.h.init=function(){var t=cast.framework.events.EventType,e=cast.framework.CastReceiverContext.getInstance().getPlayerManager();e.addEventListener(t.PLAYING,this.I),e.addEventListener(t.PAUSE,this.H),e.addEventListener(t.MEDIA_FINISHED,this.w),e.addEventListener(t.BUFFERING,this.o),e.addEventListener(t.SEEKING,this.K),e.addEventListener(t.SEEKED,this.J),e.addEventListener(t.STALLED,this.M),e.addEventListener(t.PLAYER_LOADING,this.D),e.addEventListener(t.ERROR,this.C),e.addEventListener(t.BITRATE_CHANGED,this.f)},e.h.destroy=function(){var t,n,r=this;return e.z((function(a){return t=cast.framework.events.EventType,(n=cast.framework.CastReceiverContext.getInstance().getPlayerManager()).removeEventListener(t.PLAYING,r.I),n.removeEventListener(t.PAUSE,r.H),n.removeEventListener(t.MEDIA_FINISHED,r.w),n.removeEventListener(t.BUFFERING,r.o),n.removeEventListener(t.SEEKING,r.K),n.removeEventListener(t.SEEKED,r.J),n.removeEventListener(t.STALLED,r.M),n.removeEventListener(t.PLAYER_LOADING,r.D),n.removeEventListener(t.ERROR,r.C),n.removeEventListener(t.BITRATE_CHANGED,r.f),e.v(a,l.prototype.destroy.call(r),0)}))},e.h.Jg=function(){this.a.trigger(new e.M(e.Kd)),this.fa(e.no)},e.h.Ig=function(){this.fa(e.No)},e.h.Ri=function(){this.fa(e.Io)},e.h.Ji=function(t){t.isBuffering?this.fa(e.jn):(t=this.a.isPaused()?e.No:e.no,this.fa(t))},e.h.Lg=function(){this.h=1,this.a.trigger(new e.M(e.Ae))},e.h.Kg=function(){this.a.trigger(new e.M(e.ze))},e.h.kj=function(){this.h=2},e.h.Vi=function(){this.fa(e.Mo)},e.h.Gg=function(t){var n=this.a.getStats();this.a.trigger(new e.M(e.dc,{detail:{bandwidth:t.totalBitrate,width:n.width,height:n.height}}))},e.h.Hg=function(t){t=new e.K(e.L,7,7300,{detailedErrorCode:t.detailedErrorCode,error:t.error,reason:t.reason}),this.a.trigger(new e.M(e.Rc,{detail:t})),this.fa(e.hm)},O.prototype.init=function(){cast.framework.CastReceiverContext.getInstance().getPlayerManager().addEventListener(j(),this.a)},O.prototype.release=function(){cast.framework.CastReceiverContext.getInstance().getPlayerManager().removeEventListener(j(),this.a)},O.prototype.getTimelineCues=function(){return cast.framework.CastReceiverContext.getInstance().getPlayerManager().getTimedMetadata().map((function(t){return F(t)}))},O.prototype.f=function(t){if(t instanceof cast.framework.events.TimedMetadataEvent){var n=null;switch(t.type){case cast.framework.events.EventType.TIMED_METADATA_CHANGED:n=e.mh;break;case cast.framework.events.EventType.TIMED_METADATA_ENTER:n=e.oh;break;case cast.framework.events.EventType.TIMED_METADATA_EXIT:n=e.ph}n&&this.Mb(new e.M(n,{detail:F(t.timedMetadataInfo)}))}else for(n=(t=e.t(this.getTimelineCues())).next();!n.done;n=t.next())this.Mb(new e.M(e.mh,{detail:n.value}))},e.u(G,e.R),e.h=G.prototype,e.h.Cb=function(t){this.l=t,H().addEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.m)},e.h.release=function(){this.h=[],this.j=[],this.a=this.f=null},e.h.load=function(){},e.h.destroy=function(){this.l=null,H().removeEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.m)},e.h.getVideoTracks=function(){return[]},e.h.getAudioTracks=function(){return this.h},e.h.da=function(){return this.j},e.h.ea=function(){return null},e.h.wa=function(){var t=this.ga();return t&&t.renditions[0]},e.h.ya=function(){var t=this.ha();return t&&t.renditions[0]},e.h.Na=function(){return null},e.h.Wa=function(){return null},e.h.Xa=function(){return null},e.h.za=function(){return null},e.h.ga=function(){var t=null;if(this.f){var n=this.f.getActiveId();typeof n===e.ud&&(n=n.toString(),t=this.getAudioTracks().find((function(t){return t.id===n}))||null)}return t},e.h.ha=function(){var t=null;if(this.a){var n=this.a.getActiveIds()[0];typeof n===e.ud&&(n=n.toString(),t=this.da().find((function(t){return t.id===n}))||null)}return t},e.h.Ta=function(){this.g.warn("Video tracks unavailable on Cast")},e.h.ka=function(t){t&&this.f&&this.f.setActiveById(+t.id)},e.h.sa=function(t){this.a&&(t?this.a.setActiveByIds([+t.id]):this.a.setActiveByIds([]))},e.h.Sa=function(){this.g.warn("Video renditions unavailable on Cast")},e.h.eb=function(t){this.ka(t&&t.track)},e.h.gb=function(t){this.sa(t&&t.track)},e.h.addTextTrack=function(t){var n,r,a=this;return e.z((function(i){if(1==i.a)return e.v(i,y(t,Object.values(cast.framework.messages.CaptionMimeType),a.l.getNetworkEngine()),2);if((n=i.f)&&a.a){(r=new cast.framework.messages.Track(a.o++,cast.framework.messages.TrackType.TEXT)).isInBand=!1,r.language=n.language,r.name=n.label,r.subtype=n.kind,r.trackContentId=n.url,r.trackContentType=n.mimeType,r.customData={mimeType:t.mimeType,url:t.url};try{a.a.addTracks([r]),U(a)}catch(e){throw a.g.warn("failed on track",t),e}}e.w(i)}))},e.h.na=function(){return!0},e.h.pj=function(){this.f=H().getAudioTracksManager();var t=this.f.getTracks();this.h=K(e.Q,t),U(this),t=this.l.getConfiguration(),z(this,e.Q,t.preferredAudioLanguage,t.preferredAudioRole),z(this,e.O,t.preferredTextLanguage,t.preferredTextRole)},G.prototype.isAbrEnabled=G.prototype.na,G.prototype.addTextTrack=G.prototype.addTextTrack,G.prototype.setTextRendition=G.prototype.gb,G.prototype.setAudioRendition=G.prototype.eb,G.prototype.setVideoRendition=G.prototype.Sa,G.prototype.setTextTrack=G.prototype.sa,G.prototype.setAudioTrack=G.prototype.ka,G.prototype.setVideoTrack=G.prototype.Ta,G.prototype.getTextTrack=G.prototype.ha,G.prototype.getAudioTrack=G.prototype.ga,G.prototype.getVideoTrack=G.prototype.za,G.prototype.getLoadingTextRendition=G.prototype.Xa,G.prototype.getLoadingAudioRendition=G.prototype.Wa,G.prototype.getLoadingVideoRendition=G.prototype.Na,G.prototype.getTextRendition=G.prototype.ya,G.prototype.getAudioRendition=G.prototype.wa,G.prototype.getVideoRendition=G.prototype.ea,G.prototype.getTextTracks=G.prototype.da,G.prototype.getAudioTracks=G.prototype.getAudioTracks,G.prototype.getVideoTracks=G.prototype.getVideoTracks,e.u(q,e.Vh),e.h=q.prototype,e.h.init=function(t,e){var n=this;this.A=t,e&&(this.g=this.o=e);var r=Y();r.setMessageInterceptor(cast.framework.messages.MessageType.MEDIA_STATUS,this.Xi.bind(this)),r.setMediaPlaybackInfoHandler(this.sg.bind(this)),this.a=new V(this),this.a.init(),this.h=new G,this.h.Cb(this),this.m=new O((function(t){return n.trigger(t)})),this.m.init()},e.h.unload=function(){var t=Y();return t.getPlayerState()!==cast.framework.messages.PlayerState.IDLE&&t.stop(),this.h&&this.h.release(),this.m&&this.m.release(),this.f=null,Promise.resolve()},e.h.release=function(){var t=this;return this.unload().then((function(){t.a&&t.a.release()}))},e.h.destroy=function(){var t=this;return e.z((function(n){if(1==n.a)return t.A=null,t.o=e.Dj(),t.g=t.o,t.j=-1,t.w=null,t.a?e.v(n,t.a.destroy(),3):n.G(2);2!=n.a&&(t.a=null),t.h&&(t.h.destroy(),t.h=null),e.w(n)}))},e.h.play=function(){var t=Y();return null!==t.getBreakManager().getBreakClipCurrentTimeSec()?Promise.reject("Cannot play during ads playout."):(t.play(),Promise.resolve())},e.h.pause=function(){var t=Y();return null!==t.getBreakManager().getBreakClipCurrentTimeSec()?Promise.reject("Cannot pause during ads playout."):(t.pause(),Promise.resolve())},e.h.isPaused=function(){return Y().getPlayerState()===cast.framework.messages.PlayerState.PAUSED},e.h.isEnded=function(){return Y().getPlayerState()===cast.framework.messages.PlayerState.IDLE},e.h.seek=function(t){var e=Y();return null!==e.getBreakManager().getBreakClipCurrentTimeSec()?Promise.reject(n):(e.seek(t),Promise.resolve())},e.h.getPosition=function(){return Y().getCurrentTimeSec()},e.h.getDuration=function(){return Y().getDurationSec()},e.h.getPlaybackRate=function(){return Y().getPlaybackRate()},e.h.setPlaybackRate=function(t){if(0<t){var e=new cast.framework.messages.SetPlaybackRateRequestData;e.playbackRate=t,Y().sendLocalMediaRequest(e)}},e.h.getVolume=function(){return cast.framework.CastReceiverContext.getInstance().getSystemVolume().level||null},e.h.setVolume=function(t){0<=t&&1>=t&&cast.framework.CastReceiverContext.getInstance().setSystemVolumeLevel(t)},e.h.setMuted=function(t){cast.framework.CastReceiverContext.getInstance().setSystemVolumeMuted(t)},e.h.isMuted=function(){return cast.framework.CastReceiverContext.getInstance().getSystemVolume().muted||null},e.h.getLoadedSource=function(){var t=Y().getMediaInformation();if(t){var e=Y().getPlaybackConfig();e=!!e&&e.protectionSystem!==cast.framework.ContentProtection.NONE;var n=this.w&&-1!==this.j?this.w[this.j]:null;return!(n=n?n.name:void 0)&&t.metadata&&(n=t.metadata.title),{url:t.contentId,type:t.contentType,gk:e,name:n}}return null},e.h.getDrmInfo=function(){return null},e.h.getPresentationStartTime=function(){var t=Y().getMediaInformation();return t&&t.startAbsoluteTime||0},e.h.getSeekRange=function(){var t={start:0,end:this.getDuration()};if(this.isLive()){var n=Y().getLiveSeekableRange();n&&typeof n.start===e.ud&&typeof n.end===e.ud&&(t={start:n.start,end:n.end})}return t},e.h.getState=function(){return this.a?this.a.getState():e.Do},e.h.getStats=function(){var t=e.Yl();if(this.f){t=Y().getStats(),this.f.m=t.estimatedBandwidth||NaN,this.f.A=t.streamBandwidth||NaN;var n=this.f,r=t.height||NaN;n.j=t.width||NaN,n.f=r,n=this.f,r=typeof t.decodedFrames===e.ud?t.decodedFrames:NaN,n.h=typeof t.droppedFrames===e.ud?t.droppedFrames:NaN,n.g=r,t=this.f.getStats()}return t},e.h.isLive=function(){return-1===this.getDuration()},e.h.load=function(t){var n,r,a=this;return e.z((function(i){return a.f=new e.Xl,a.a.j=a.f.a,a.w=e.um(t),e.Gj(t)&&(a.g=e.Fj(a.o,t)),a.B?(a.B=!1,i.return()):(n=a.w[a.j],(r=new cast.framework.messages.LoadRequestData).autoplay=a.g.autoplay,typeof a.g.startTime===e.ud&&(r.currentTime=a.g.startTime),n.type&&(r.media.contentType=n.type),r.media.contentId=n.url,r.media.customData={playerConfiguration:g(a.g),local:!0},e.v(i,Y().load(r),0))}))},e.h.getBufferInfo=function(){return this.C.warn(e.qa),new e.Uh},e.h.getTrackManager=function(){return this.h},e.h.getConfiguration=function(){return this.g},e.h.getSurface=function(){return this.A},e.h.setNetworkEngine=function(t){this.D=t},e.h.getNetworkEngine=function(){return this.D},e.h.getSourceIndex=function(){return this.j},e.h.setSourceIndex=function(t){this.j=t},e.h.getPeriods=function(){return[]},e.h.namespace=function(){return h},e.h.getTimelineCues=function(){return this.m&&this.m.getTimelineCues()||[]},e.h.resetAbr=function(){this.C.warn(o)},e.h.onError=function(t){this.trigger(new e.M(e.Rc,{detail:t}))},e.h.canPlay=function(){return e.Bi()?2:0},e.h.Xi=function(t){return t.customData||(t.customData={}),t.customData.stats=g(this.getStats()),t},e.h.sg=function(t,n){var r=null;t.media.customData&&(r=m(t.media.customData.playerConfiguration));var a=r?r.abr:null;return a&&typeof a.defaultBandwidthEstimate===e.ud?n.initialBandwidth=a.defaultBandwidthEstimate:n.initialBandwidth=void 0,function(t,n){function r(){n.protectionSystem=cast.framework.ContentProtection.NONE,n.licenseUrl=void 0,n.licenseRequestHandler=void 0,n.licenseHandler=void 0}if(t&&t.drm){var a=t.drm,i=e.Yj(a);if(i){var o,s,u=e.um(t)[0],c=[e.Uj];for(u.type!==e.rm&&c.unshift(e.Sj),a.preferredDrmSystem===e.Uj&&c.reverse();c.length&&!s;)o=c.shift(),s=i.Ua[o];s?(a=o===e.Sj?cast.framework.ContentProtection.WIDEVINE:o===e.Uj?cast.framework.ContentProtection.PLAYREADY:void 0,n.protectionSystem=a,n.licenseUrl=s.licenseUrl,function(t,n,r,a){n.modifiers.licenseRequest?t.licenseRequestHandler=function(t){var i=e.Fh(t.url);t.headers&&(i.headers=t.headers),i.body=t.content,i.allowCrossSiteCredentials=t.withCredentials,n.modifiers.licenseRequest(r,i,a),t.url=i.uris[0],t.headers=i.headers,t.content=i.body,t.withCredentials=i.allowCrossSiteCredentials}:t.licenseRequestHandler=void 0}(n,s,t,a={ldlDelay:0,customData:{}}),function(t,n,r,a){n.modifiers.licenseResponse?t.licenseHandler=function(t){return t=e.fj({},t.buffer,200,""),n.modifiers.licenseResponse(r,t,a),e.J(t.data)}:t.licenseHandler=void 0}(n,s,t,a)):r()}else r()}else r()}(r,n),n},e.h.getTextDisplayer=function(){return null},e.h.setDrmCustomDataModifier=function(){},e.h.setCdnErrorCallback=function(){},q.prototype.getTextDisplayer=q.prototype.getTextDisplayer,q.prototype.getNetworkEngine=q.prototype.getNetworkEngine,q.prototype.setNetworkEngine=q.prototype.setNetworkEngine,e.h=X.prototype,e.h.kb=function(){return"Google Cast Framework"},e.h.lb=function(){return cast.framework.VERSION},e.h.qb=function(){return 0},e.h.Z=function(){return""},e.h.getCreativeId=function(){return""},e.h.getApiFramework=function(){return null},e.h.getAdSystem=function(){return""},e.h.getAdvertiserName=function(){return""},e.h.getTitle=function(){return this.a.title||""},e.h.getDuration=function(){return this.a.duration||0},e.h.getSkipTimeOffset=function(){return this.a.whenSkippable||0},e.h.Xb=function(){return!1},e.h.Db=function(){return this.a.clickThroughUrl||null},e.h.getMediaUrl=function(){return this.a.contentUrl||this.a.contentId||null},e.h.nb=function(){return 0},e.h.mb=function(){return 0},e.h.Ya=function(){return 0},e.h.Oa=function(){switch(this.Eb()){case 0:return 0;case-1:return 2;default:return 1}},e.h.getPodIndex=function(){return this.g},e.h.Eb=function(){return this.f.position},e.h.Fb=function(){return this.h},e.h.pb=function(){return this.j},e.h.getWrapperAdIds=function(){return[]},e.h.getWrapperAdSystems=function(){return[]},e.h.getWrapperCreativeIds=function(){return[]},X.prototype.getWrapperCreativeIds=X.prototype.getWrapperCreativeIds,X.prototype.getWrapperAdSystems=X.prototype.getWrapperAdSystems,X.prototype.getWrapperAdIds=X.prototype.getWrapperAdIds,X.prototype.getSequenceLength=X.prototype.pb,X.prototype.getPositionInSequence=X.prototype.Fb,X.prototype.getPodTimeOffset=X.prototype.Eb,X.prototype.getPodIndex=X.prototype.getPodIndex,X.prototype.getPodType=X.prototype.Oa,X.prototype.getMediaBitrate=X.prototype.Ya,X.prototype.getMediaHeight=X.prototype.mb,X.prototype.getMediaWidth=X.prototype.nb,X.prototype.getMediaUrl=X.prototype.getMediaUrl,X.prototype.getClickThroughUrl=X.prototype.Db,X.prototype.isBumper=X.prototype.Xb,X.prototype.getSkipTimeOffset=X.prototype.getSkipTimeOffset,X.prototype.getDuration=X.prototype.getDuration,X.prototype.getTitle=X.prototype.getTitle,X.prototype.getAdvertiserName=X.prototype.getAdvertiserName,X.prototype.getAdSystem=X.prototype.getAdSystem,X.prototype.getApiFramework=X.prototype.getApiFramework,X.prototype.getCreativeId=X.prototype.getCreativeId,X.prototype.getId=X.prototype.Z,X.prototype.getTechnology=X.prototype.qb,X.prototype.getAdManagerVersion=X.prototype.lb,X.prototype.getAdManagerName=X.prototype.kb,W.prototype.getCuePoints=function(){return this.a.map((function(t){return t.position}))},W.prototype.Gb=function(){return!!this.a.find((function(t){return 0===t.position}))},W.prototype.Za=function(){return!!this.a.find((function(t){return-1===t.position}))},W.prototype.hasPostroll=W.prototype.Za,W.prototype.hasPreroll=W.prototype.Gb,W.prototype.getCuePoints=W.prototype.getCuePoints,e.h=J.prototype,e.h.load=function(){var t=this;return e.z((function(n){ft&&(ft=!1,tt(t,0)),e.w(n)}))},e.h.start=function(){return e.z((function(t){Q().play(),e.w(t)}))},e.h.resume=function(){-1!==this.getPosition()&&Q().play()},e.h.pause=function(){-1!==this.getPosition()&&Q().pause()},e.h.skip=function(){},e.h.getVolume=function(){return this.l.getVolume()||0},e.h.setVolume=function(t){this.l.setVolume(t)},e.h.getPosition=function(){var t=this.a&&this.a.getBreakClipCurrentTimeSec();return typeof t===e.ud?t:-1},e.h.dispose=function(){var t=this;return e.z((function(n){Q().removeEventListener(t.f,t.g),e.w(n)}))},e.h.Mg=function(t){var n=cast.framework.events.EndedReason;switch(t.type){case cast.framework.events.EventType.PLAYER_LOADING:this.a=Q().getBreakManager(),this.a.setPlayWatchedBreak(!0),t=this.a.getBreaks(),this.l.trigger(new e.M(e.Kb,{adsTimeline:new W(t)}));break;case cast.framework.events.EventType.BREAK_CLIP_LOADING:Z(this,e.Ab,t);break;case cast.framework.events.EventType.BREAK_STARTED:Z(this,e.sb,t);break;case cast.framework.events.EventType.BREAK_ENDED:Z(this,e.tb,t);break;case cast.framework.events.EventType.BREAK_CLIP_STARTED:Z(this,e.Gb,t);break;case cast.framework.events.EventType.BREAK_CLIP_ENDED:t.endedReason===n.SKIPPED?(Z(this,e.Fb,t),Z(this,e.Hb,t)):t.endedReason===n.STOPPED?Z(this,e.Hb,t):t.endedReason===n.END_OF_STREAM?(Z(this,e.wb,t),Z(this,e.Hb,t)):t.endedReason===n.ERROR&&tt(this,1);break;case cast.framework.events.EventType.PLAYING:Z(this,e.Eb,t);break;case cast.framework.events.EventType.PAUSE:Z(this,e.Cb,t);break;case cast.framework.events.EventType.BUFFERING:t.isBuffering?Z(this,e.ub,t):Z(this,e.Eb,t)}},J.prototype.getPosition=J.prototype.getPosition,J.prototype.setVolume=J.prototype.setVolume,J.prototype.getVolume=J.prototype.getVolume,J.prototype.skip=J.prototype.skip,J.prototype.pause=J.prototype.pause,J.prototype.resume=J.prototype.resume;var ft=!1;e.h=nt.prototype,e.h.init=function(n){var r=this;n&&(this.f=new q,e.so(n,this.f),this.l=n,this.o.on(t,"unload",(function(){return e.z((function(t){return r.l&&r.l.getState()!==e.Co?e.v(t,function(t){return e.z((function(n){return 1==n.a?e.v(n,t.bc(e.Ad),2):e.v(n,t.bc(e.zd),0)}))}(r.l),0):t.G(0)}))})))},e.h.start=function(){if(!this.a&&t.cast&&cast.framework&&cast.framework.CastReceiverContext){this.a=!0;var e=cast.framework.CastReceiverContext.getInstance(),n=e.getPlayerManager(),r=new cast.framework.CastReceiverOptions;r.customNamespaces={},r.customNamespaces[f]=cast.framework.system.MessageType.JSON;var a=new cast.framework.PlaybackConfig;a.manifestHandler=this.ri.bind(this),r.playbackConfig=a,(a=this.l&&this.l.getSurface().getMedia())&&(r.mediaElement=a),n.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,this.pi.bind(this)),n.addEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.A),e.start(r),e.addCustomMessageListener(f,this.w)}},e.h.stop=function(){if(this.a){this.a=!1,this.o.release();var t=cast.framework.CastReceiverContext.getInstance();t.getPlayerManager().removeEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.A),t.removeCustomMessageListener(f,this.w),t.stop(),this.l=this.f=null}},e.h.Xc=function(t){this.j=t},e.h.Cj=function(t){this.m=t},e.h.on=function(t,e){cast.framework.CastReceiverContext.getInstance().addEventListener(t,e)},e.h.off=function(t,e){cast.framework.CastReceiverContext.getInstance().removeEventListener(t,e)},e.h.addMessageListener=function(t){typeof t===e.Tc&&this.g.add(t)},e.h.removeMessageListener=function(t){typeof t===e.Tc&&this.g.delete(t)},e.h.sendMessage=function(t,e){cast.framework.CastReceiverContext.getInstance().sendCustomMessage(f,e,g(t))},e.h.Vb=function(){return this.a},e.h.ei=function(){var t=null,n=cast.framework.CastReceiverContext.getInstance().getPlayerManager().getMediaInformation();return n&&n.metadata&&(t=n.metadata),e.B.ua(t)},e.h.ri=function(t){if((t=t.trim()).startsWith("#EXTM3U"))return function(t,n){t.h.debug("Detected HLS, parsing");var r=cast.framework.messages.HlsVideoSegmentFormat,a=cast.framework.CastReceiverContext.getInstance();r=a.getPlayerManager().getMediaInformation().hlsVideoSegmentFormat===r.FMP4?e.Ge:e.Fe;for(var i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n+/m),o=[],s=0;s<i.length;){var u=i[s].trim();if(i[s].startsWith("#EXT-X-STREAM-INF")){var c=at(u,e.oa),h=at(u,"RESOLUTION"),p=e.t([]),f=p.next().value;if(p=p.next().value,h&&(f=(h=e.t(h.split("x").map((function(t){return+t})))).next().value,p=h.next().value),!a.canDisplayType(r,c,f,p)){s+=2;continue}}o.push(u),++s}return o.join("\n")}(this,t);try{var n=(new DOMParser).parseFromString(t,e.qe)}catch(e){return t}var r=n.getElementsByTagName("MPD")[0];if(r){t=r,this.h.debug("Detected DASH, parsing"),n=cast.framework.CastReceiverContext.getInstance();for(var a=(r=t.getElementsByTagName("Period")).length-1;0<=a;--a){for(var i=r[a].getElementsByTagName(e.ka),o=i.length-1;0<=o;--o){var s=i[o].getAttribute("contentType");if(s===e.Ee||s===e.Xb){s=i[o].getAttribute(e.kd);for(var u=i[o].getElementsByTagName(e.fb),c=u.length-1;0<=c;--c){var h=u[c].getAttribute(e.kd)||s,p=u[c].getAttribute(e.xc),f=u[c].getAttribute(e.Te)||void 0,d=u[c].getAttribute(e.Uc)||void 0;void 0!==f&&(f=+f),void 0!==d&&(d=+d),n.canDisplayType(h,p,f,d)||i[o].removeChild(u[c])}i[o].getElementsByTagName(e.fb).length||r[a].removeChild(i[o])}}r[a].getElementsByTagName(e.ka).length||t.removeChild(r[a])}return(new XMLSerializer).serializeToString(t)}if(r=n.getElementsByTagName(e.kb)[0]){for(t=r,this.h.debug("Detected Smooth, parsing"),n=cast.framework.CastReceiverContext.getInstance(),a=(r=t.getElementsByTagName("StreamIndex")).length-1;0<=a;--a)if(r[a].getAttribute("Type")===e.Ee){for(o=(i=r[a].getElementsByTagName(e.db)).length-1;0<=o;--o)void 0!==(s=i[o].getAttribute(e.Ta)||void 0)&&(s=+s),void 0!==(u=i[o].getAttribute(e.Qa)||void 0)&&(u=+u),n.canDisplayType(e.Ge,void 0,s,u)||r[a].removeChild(i[o]);r[a].getElementsByTagName(e.db).length||t.removeChild(r[a])}t=(new XMLSerializer).serializeToString(t)}return t},e.h.pi=function(t){var n,r,a,i=this;return e.z((function(o){switch(o.a){case 1:if(t.media.customData&&(n=m(t.media.customData.playerConfiguration)),!i.l||!n){o.G(2);break}if(!i.j){o.G(3);break}return e.v(o,Promise.resolve(i.j(n)),4);case 4:n=o.f||n;case 3:if(!n.ima){o.G(5);break}return e.v(o,function(t,n,r){var a,i,o,s,u,c,h;return e.z((function(p){if(1==p.a)return(a=n.adTagUrl)?(e.mf(p,2),ft=!1,i=e.Fh(a),e.v(p,r.fetch(i).N,4)):p.return();if(2!=p.a){if((o=p.f)&&o.data)if(s=e.$f(o.data),u=new DOMParser,(c=u.parseFromString(s,e.qe)).getElementsByTagName("vmap:VMAP").length)e.C("VMAP detected."),t.vmapAdsRequest=$(s);else if(c.getElementsByTagName("VAST").length){e.C("VAST detected.");var f=new cast.framework.messages.BreakClip("bc1");f.vastAdsRequest=$(s);var d=new cast.framework.messages.Break("b1",[f.id],0);t.breakClips=[f],t.breaks=[d]}else e.C("Unsupported schema."),ft=!0;return e.nf(p,0)}h=e.of(p),e.C("Failed to fetch an ad",h),ft=!0,e.w(p)}))}(t.media,n.ima,i.l.getNetworkEngine()),5);case 5:if(typeof n.startTime===e.ud&&n.startTime!==t.currentTime&&(t.currentTime=n.startTime),t.media.customData.local){o.G(7);break}return i.f.B=!0,e.v(o,e.xo(i.l,n),8);case 8:return e.v(o,e.yo(i.l),9);case 9:r=i.l.getLoadedSource(),t.media.contentId=r.url,t.media.contentType=r.type,r.xb&&(t.media.hlsVideoSegmentFormat=v(r.xb,e.sh)),r.audioMimeType&&(t.media.hlsSegmentFormat=v(r.audioMimeType,e.Q));case 7:void 0===t.autoplay&&(t.autoplay=i.l.getConfiguration().autoplay);case 2:if(!i.m){o.G(10);break}return e.v(o,Promise.resolve(i.m(t)),11);case 11:(a=o.f)&&(t=a);case 10:return o.return(t)}}))},e.h.Ui=function(t){!this.l||t.media.customData&&t.media.customData.local||e.Ao(this.l)},e.h.Fg=function(t){if(0<this.g.size){var e=m(t.data);this.g.forEach((function(t){return t(e)}))}},e.A(p,nt),nt.prototype.getContentMetadata=nt.prototype.ei,nt.prototype.isApiReady=nt.prototype.Vb,nt.prototype.sendMessage=nt.prototype.sendMessage,nt.prototype.removeMessageListener=nt.prototype.removeMessageListener,nt.prototype.addMessageListener=nt.prototype.addMessageListener,nt.prototype.off=nt.prototype.off,nt.prototype.on=nt.prototype.on,nt.prototype.setLoadRequestDataInterceptor=nt.prototype.Cj,nt.prototype.setPlayerConfigInterceptor=nt.prototype.Xc,nt.prototype.stop=nt.prototype.stop,nt.prototype.start=nt.prototype.start,nt.prototype.init=nt.prototype.init,nt.getInstance=rt;var dt=null;e.h=it.prototype,e.h.load=function(){var t,n,r,a,i,o=this;return e.z((function(s){if(o.a=o.f.o,o.a)for(t=o.a.controller,n=o.mj.bind(o),r=e.t(o.h),a=r.next();!a.done;a=r.next())i=a.value,o.g.on(t,i,n);e.w(s)}))},e.h.start=function(){return e.z((function(t){e.w(t)}))},e.h.resume=function(){this.a&&this.a.isPlayingBreak&&this.a.isPaused&&this.a.controller.playOrPause()},e.h.pause=function(){this.a&&this.a.isPlayingBreak&&!this.a.isPaused&&this.a.controller.playOrPause()},e.h.skip=function(){var t=this.f.a;t&&this.f.sendMessage(d,{type:"SKIP_AD",requestId:Math.round(1e3*Math.random()),mediaSessionId:t.mediaSessionId})},e.h.getVolume=function(){return this.f.getVolume()||0},e.h.setVolume=function(t){this.f.setVolume(t)},e.h.getPosition=function(){var t=-1,n=this.f.a;return n&&typeof(n=n.getEstimatedBreakClipTime())===e.ud&&(t=n),t},e.h.dispose=function(){var t=this;return e.z((function(n){t.g.release(),e.w(n)}))},e.h.mj=function(t){switch(t.field){case"mediaInfo":t.value&&(t=t.value).breaks&&this.f.trigger(new e.M(e.Kb,{adsTimeline:new W(t.breaks)}));break;case"isPlayingBreak":t.value?ot(this,e.sb):(ot(this,e.wb),ot(this,e.Hb),ot(this,e.tb));break;case"currentBreakClipNumber":0<=t.value&&(0<t.value&&(ot(this,e.wb),ot(this,e.Hb)),ot(this,e.Gb));break;case"isPaused":this.a.isPlayingBreak&&(t.value?ot(this,e.Cb):ot(this,e.Eb))}},it.prototype.getPosition=it.prototype.getPosition,it.prototype.setVolume=it.prototype.setVolume,it.prototype.getVolume=it.prototype.getVolume,it.prototype.skip=it.prototype.skip,it.prototype.pause=it.prototype.pause,it.prototype.resume=it.prototype.resume,ut.prototype.name=function(){return"clpp.cast.ads.SenderAdsManagerFactory"},ut.prototype.$=function(t,n){return t.namespace()===e.tc&&!(!n||!n.ima)},ut.prototype.create=function(t){return new it(t.a)},ut.prototype.create=ut.prototype.create,ut.prototype.isSupported=ut.prototype.$,ut.prototype.name=ut.prototype.name,e.ep(new ut),ct.prototype.name=function(){return"clpp.cast.ads.AdsManagerFactory"},ct.prototype.$=function(t,e){return!!rt().Vb()&&!(!e||!e.ima)},ct.prototype.create=function(t){return new J(t)},ct.prototype.create=ct.prototype.create,ct.prototype.isSupported=ct.prototype.$,ct.prototype.name=ct.prototype.name,e.ep(new ct)};if("undefined"!=typeof module&&module.exports){var r=require("./cl.core.min.js");e=r._,n.call(t,this),module.exports=t}else"undefined"!=typeof define&&define.amd?define(["./cl.core.min"],(function(r){return e=r._,n.call(t,this),t})):(e=this.clpp._,n.call(t,this))}();